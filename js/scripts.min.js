$(document).ready(function(){function s(s){var i,t=s.toString().length;return i=0==t?"00":1==t?"0"+s:2==t?s:s.replace(/^0+/,"")}$(".row-number").each(function(s){$(this).html(s+1)});var i='<div class="row sub"><div class="col-md-1"><div class="row"><div class="col-md-12 row-controls"><i class="fa fa-times row-control" aria-hidden="true"></i><i class="fa fa-bars row-control" aria-hidden="true"></i></div></div><div class="row"><div class="col-md-12 row-number"></div></div></div><div class="col-md-2"><div class="row"><div class="col-md-12">Start Time:</div></div><div class="row"><div class="col-md-6"><input class="start-min number" max="59" placeholder="mm"></div><div class="col-md-6"><input class="start-sec number" max="59" placeholder="ss"></div></div></div><div class="col-md-2"><div class="row"><div class="col-md-12">End Time:</div></div><div class="row"><div class="col-md-6"><input class="end-min number" max="59" placeholder="mm"></div><div class="col-md-6"><input class="end-sec number" max="59" placeholder="ss"></div></div></div><div class="col-md-7"><div class="row"><div class="col-md-12">Subtitle:</div></div><div class="row"><div class="col-md-12"><input class="subtitle-text" type="text"></div></div></div></div>';$(document).on("keyup","input.number",function(){var s=Number($(this).attr("max")),i=$(this).val(),t=Number($(this).val());(t>s||isNaN(t))&&(i=i.slice(0,-1),$(this).val(i))}),$(document).on("keyup","input",function(){$("#downloadlink").css("display","none")}),$(".control-add").click(function(){$(".sub-first").removeClass("sub-no-sort"),$(".row-control").removeClass("row-control-disable");Number($(".row-number").each(function(){}).length)+1;$("#subs").append(i),$(".row-number").each(function(s){$(this).html(s+1)})}),$(".control-create").click(function(){$("#output").html("");var i=$(".sub").length;$(".sub").each(function(t){var n=t+1,e=s($(this).find(".start-min").val()),l=s($(this).find(".start-sec").val()),c=s($(this).find(".end-min").val()),d=s($(this).find(".end-sec").val()),o=$(this).find(".subtitle-text").val();$("#output").append(n+"&#13;00:"+e+":"+l+",000 --> 00:"+c+":"+d+",000&#13;"+o),i-1>t&&$("#output").append("&#13;&#13;")})}),$("#subs").sortable({cancel:".sub-no-sort",handle:".fa-bars",stop:function(){$(".sub").removeClass("sub-first"),$(".row-number").each(function(s){$(this).html(s+1)})}}),$(document).on("click",".fa-times",function(){$(this).closest(".sub").remove(),$(".row-number").each(function(s){$(this).html(s+1)})}),function(){var s=null,i=function(i){var t=new Blob([i],{type:"text/plain"});return null!==s&&window.URL.revokeObjectURL(s),s=window.URL.createObjectURL(t)},t=document.getElementById("create"),n=document.getElementById("output");t.addEventListener("click",function(){var s=document.getElementById("downloadlink");s.href=i(n.value),s.style.display="block"},!1)}()});